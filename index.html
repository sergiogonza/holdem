<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Texas Hold'em Poker ‚Äì Tr√©nink se s√°zen√≠m a strategiemi</title>
  <style>
    :root{--bg:#0b2b18;--card:#ffffff;--panel:#0f3b26;--accent:#e2b44b}
    body{margin:0;font-family:Inter, Roboto, Arial, sans-serif;background:linear-gradient(180deg,#04221a 0%, #071a13 100%);color:#e6f3ea}
    .app{display:grid;grid-template-columns:300px 1fr 360px;grid-template-rows:90px 1fr;gap:12px;height:100vh;padding:12px}
    header{grid-column:1/4;background:rgba(255,255,255,0.03);border-radius:12px;padding:12px;display:flex;align-items:center;gap:16px}
    h1{font-size:18px;margin:0}
    .left, .right, main{background:rgba(255,255,255,0.03);border-radius:12px;padding:12px;overflow:auto}
    .left{grid-column:1;grid-row:2}
    main{grid-column:2;grid-row:2;display:flex;flex-direction:column;gap:12px}
    .right{grid-column:3;grid-row:2}
    .board{display:flex;gap:10px;align-items:center;justify-content:center;padding:8px}
    .card{width:80px;height:110px;border-radius:8px;background:var(--card);color:#111;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:700;box-shadow:0 6px 12px rgba(0,0,0,0.5)}
    .card.back{background:linear-gradient(135deg,#1a6b4a,#0f4b33);color:#fff}
    .hand{display:flex;gap:8px;align-items:center}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:var(--accent);border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--accent)}
    .chips-bar{display:flex;align-items:center;gap:8px}
    .chip{background:#222;padding:8px 12px;border-radius:999px}
    .history-item{padding:8px;border-radius:8px;margin-bottom:8px;background:rgba(0,0,0,0.14)}
    .rankings{display:flex;flex-direction:column;gap:6px}
    .prob-table{width:100%;border-collapse:collapse}
    .prob-table th,.prob-table td{padding:6px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.04)}
    .desc{font-size:13px;line-height:1.4;color:#cfe9d2}
    .small{font-size:12px;color:#9ccaa9}
    .center{display:flex;flex-direction:column;align-items:center}
    .role-badge{background:rgba(226,180,75,0.15);padding:6px 10px;border-radius:8px;color:var(--accent);font-weight:700;margin-bottom:8px}
    #tips{margin-top:10px;padding:10px;border-radius:8px;background:rgba(0,0,0,0.12);font-size:13px}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div style="flex:1">
        <h1>Texas Hold'em ‚Äî Tr√©nink strategi√≠</h1>
        <div class="small">C√≠l: vytvo≈ôit nejlep≈°√≠ 5-karetn√≠ kombinaci a uƒçit se rozhodovat podle pravdƒõpodobnost√≠ a stylu soupe≈ôe.</div>
      </div>
      <div class="controls">
        <button id="dealBtn">Rozdat / Nov√° hra</button>
        <button id="nextStageBtn" class="secondary">Dal≈°√≠ f√°ze (Flop/Turn/River)</button>
        <div class="chips-bar">
          <div class="small">S√°zka:</div>
          <input id="betRange" type="range" min="10" max="500" value="50">
          <div class="chip" id="betDisplay">50</div>
        </div>
      </div>
    </header>

    <aside class="left">
      <h3>Historie her</h3>
      <div id="history" style="margin-top:8px"></div>
    </aside>

    <main>
      <div class="center">
        <div id="botRole" class="role-badge">Role soupe≈ôe: ‚Äî</div>
        <div class="small desc">Ruka soupe≈ôe (skryt√° do showdownu)</div>
        <div id="botCards" class="hand" style="margin-top:8px"></div>
      </div>

      <div class="center">
        <div class="small desc">Spoleƒçn√© karty</div>
        <div id="board" class="board" style="margin-top:8px"></div>
      </div>

      <div class="center">
        <div class="small desc">Va≈°e karty</div>
        <div id="playerCards" class="hand" style="margin-top:8px"></div>
      </div>

      <div style="display:flex;gap:8px;align-items:center;justify-content:center;margin-top:8px">
        <button id="betBtn">Vsadit / Nav√Ω≈°it</button>
        <button id="callBtn" class="secondary">Dorovnat (Call)</button>
        <button id="foldBtn" class="secondary">Slo≈æit (Fold)</button>
      </div>

      <div style="display:flex;gap:12px;align-items:center;justify-content:center;margin-top:8px">
        <div>
          <div class="small">Va≈°e pravdƒõpodobnost</div>
          <div id="equityPlayer" class="small">‚Äî</div>
        </div>
        <div>
          <div class="small">Pravdƒõpodobnost soupe≈ôe</div>
          <div id="equityBot" class="small">‚Äî</div>
        </div>
        <div>
          <div class="small">Odhad v√Ωsledku</div>
          <div id="resultText" class="small">‚Äî</div>
        </div>
      </div>

      <div id="tips" class="small">Tipy budou zde‚Äîstatick√© i dynamick√© vysvƒõtlen√≠ taktik a proƒç soupe≈ô jedn√° tak, jak jedn√°.</div>
    </main>

    <aside class="right">
      <h3>Po≈ôad√≠ pokerov√Ωch kombinac√≠</h3>
      <div class="rankings" style="margin-top:8px">
        <div>1. Postupka v barvƒõ (Straight Flush)</div>
        <div>2. ƒåty≈ôi stejn√© (Four of a kind)</div>
        <div>3. Full house</div>
        <div>4. Barva (Flush)</div>
        <div>5. Postupka (Straight)</div>
        <div>6. Trojice (Three of a kind)</div>
        <div>7. Dva p√°ry (Two pair)</div>
        <div>8. P√°r (One pair)</div>
        <div>9. Vysok√° karta (High card)</div>
      </div>

      <h3 style="margin-top:12px">Taktiky podle stylu a s√°zky</h3>
      <div class="desc">
        <p><strong>Aggresivn√≠ hr√°ƒç (Bluffer):</strong> ƒçasto zvy≈°uje s√°zky, i kdy≈æ nem√° silnou kombinaci ‚Äî c√≠lem je vyu≈æ√≠t strach soupe≈ôe. Reagujte volnƒõ, ale trestejte bluffy, kdy≈æ m√°te silnou kombinaci.</p>
        <p><strong>Konservativn√≠ hr√°ƒç:</strong> vs√°z√≠ jen s vysokou pravdƒõpodobnost√≠. Pokud soupe≈ô vsad√≠ velkou ƒç√°st banku, ƒçasto m√° dobrou ruku ‚Äî zva≈æte slo≈æen√≠.</p>
        <p><strong>Sagazn√≠ (balanced):</strong> mixuje agresi a pasivitu; tƒõ≈æk√© ƒç√≠st. Hledejte vzorce v s√°zen√≠, sna≈æte se hodnotit velikost s√°zky v≈Øƒçi pravdƒõpodobnosti.</p>
        <p><strong>Analytick√Ω hr√°ƒç:</strong> rozhoduje podle equity a outs. Pokud soupe≈ô jedn√° konzistentnƒõ s hodnotami, m≈Ø≈æete ho p≈ôinutit chybovat ≈°patn√Ωmi over-bet shoves.</p>
      </div>

      <h3 style="margin-top:12px">Poker jako ≈°achy ‚Äî teorie tahu a protitahu</h3>
      <div class="desc">
        <p>Poker je hra s ne√∫plnou informac√≠, podobn√° ≈°achu v tom, ≈æe pl√°nujete nƒõkolik krok≈Ø dop≈ôedu. Mus√≠te kombinovat matematiku (pravdƒõpodobnosti) a psychologie (ƒçten√≠ soupe≈ôe).</p>
        <p><strong>ƒåty≈ôkvadrantov√° teorie rozhodov√°n√≠:</strong> rozdƒõl√≠me akce podle rizika (n√≠zk√©/vysok√©) a zisku (n√≠zk√Ω/vysok√Ω):</p>
        <ul>
          <li>N√≠zk√© riziko / vysok√Ω zisk: ide√°ln√≠ ‚Äî agresivnƒõ vsadit.</li>
          <li>Vysok√© riziko / vysok√Ω zisk: z√°le≈æ√≠ na informac√≠ch ‚Äî ƒçasto vy≈æaduje dobrou read.</li>
          <li>N√≠zk√© riziko / n√≠zk√Ω zisk: obvykle check nebo mal√Ω bet.</li>
          <li>Vysok√© riziko / n√≠zk√Ω zisk: obvykle fold nebo vyƒçkat na lep≈°√≠ p≈ô√≠le≈æitost.</li>
        </ul>
        <p>Tato mentalita pom≈Ø≈æe rozhodovat, kdy farblovat, kdy value-betovat a kdy se st√°hnout.</p>
      </div>

      <h3 style="margin-top:12px">Mo≈æn√© kombinace soupe≈ôe</h3>
      <table class="prob-table">
        <thead><tr><th>Kombinace</th><th>%</th></tr></thead>
        <tbody id="probBody"></tbody>
      </table>
    </aside>
  </div>

<script>
// ---------- Z√°kladn√≠ utilities ----------
const SUITS=['‚ô†','‚ô•','‚ô¶','‚ô£']
const RANKS=['2','3','4','5','6','7','8','9','T','J','Q','K','A']
const el=id=>document.getElementById(id)
function makeDeck(){const d=[];for(const s of SUITS)for(const r of RANKS)d.push({rank:r,suit:s,code:r+s});return d}
function draw(deck,n){const out=[];for(let i=0;i<n;i++){const idx=Math.floor(Math.random()*deck.length);out.push(deck.splice(idx,1)[0])}return out}
function renderCard(c,back=false){const div=document.createElement('div');div.className='card'+(back?' back':'');div.textContent=back?'üÇ†':(c.rank+c.suit);return div}

// ---------- Hodnocen√≠ ruky (stejn√© jako d≈ô√≠ve) ----------
function evaluateHand(cards){
  const rankToNum=r=>RANKS.indexOf(r)+2
  const counts={},suits={},ranks=[]
  for(const c of cards){const n=rankToNum(c.rank);counts[n]=(counts[n]||0)+1;suits[c.suit]=(suits[c.suit]||0)+1;ranks.push(n)}
  ranks.sort((a,b)=>b-a)
  const uniq=[...new Set(ranks)].sort((a,b)=>b-a)
  let flushSuit=null;for(const s in suits)if(suits[s]>=5)flushSuit=s
  let flushCards=[];if(flushSuit)flushCards=cards.filter(c=>c.suit===flushSuit).map(c=>rankToNum(c.rank)).sort((a,b)=>b-a)
  function getStraight(r){const set=new Set(r);if(set.has(14))set.add(1);const arr=[...set].sort((a,b)=>b-a);let best=[],cur=[arr[0]];for(let i=1;i<arr.length;i++){if(arr[i]===arr[i-1]-1)cur.push(arr[i]);else cur=[arr[i]];if(cur.length>best.length)best=cur.slice()}return best.length>=5?best.slice(0,5):[]}
  const straight=getStraight(uniq)
  const straightFlush=flushCards.length?getStraight(flushCards):[]
  const freq={}
  for(const r in counts){const k=counts[r];if(!freq[k])freq[k]=[];freq[k].push(Number(r))}
  for(const k in freq)freq[k].sort((a,b)=>b-a)
  if(straightFlush.length>=5)return{type:8,rankValue:8e6+straightFlush[0],desc:'Postupka v barvƒõ'}
  if(freq[4])return{type:7,rankValue:7e6+freq[4][0],desc:'ƒåty≈ôi stejn√©'}
  if(freq[3]&&(freq[2]||freq[3].length>1))return{type:6,rankValue:6e6+freq[3][0],desc:'Full house'}
  if(flushSuit)return{type:5,rankValue:5e6+flushCards[0],desc:'Barva'}
  if(straight.length>=5)return{type:4,rankValue:4e6+straight[0],desc:'Postupka'}
  if(freq[3])return{type:3,rankValue:3e6+freq[3][0],desc:'Trojice'}
  if(freq[2]&&freq[2].length>=2)return{type:2,rankValue:2e6+freq[2][0],desc:'Dva p√°ry'}
  if(freq[2])return{type:1,rankValue:1e6+freq[2][0],desc:'P√°r'}
  return{type:0,rankValue:uniq[0]||0,desc:'Vysok√° karta'}
}
function compareHands(a,b){const A=evaluateHand(a),B=evaluateHand(b);return A.rankValue>B.rankValue?1:(A.rankValue<B.rankValue?-1:0)}

// ---------- Monte Carlo pro equity a distribuce soupe≈ôe ----------
function monteCarlo(player,board,iter=600){
  const deck=makeDeck()
  const used=[...player,...board]
  for(const u of used){const i=deck.findIndex(c=>c.code===u.code);if(i>=0)deck.splice(i,1)}
  let wins=0,losses=0,ties=0,oppDist=Array(9).fill(0)
  for(let i=0;i<iter;i++){
    const d=deck.slice(),opp=draw(d,2),extra=draw(d,5-board.length),fullB=board.concat(extra)
    const res=compareHands(player.concat(fullB),opp.concat(fullB))
    if(res>0)wins++
    else if(res<0)losses++
    else ties++
    oppDist[evaluateHand(opp.concat(fullB)).type]++
  }
  return{wins:wins/iter,losses:losses/iter,ties:ties/iter,oppDist:oppDist.map(x=>x/iter)}
}

// ---------- Bot osobnosti (role) ----------
const BOT_ROLES=[
  {id:'aggressive',name:'Agresivn√≠ (Bluffer)',aggr:0.9,bluff:0.45},
  {id:'conservative',name:'Konzervativn√≠',aggr:0.2,bluff:0.05},
  {id:'balanced',name:'Sagazn√≠ (Balanced)',aggr:0.6,bluff:0.15},
  {id:'analytic',name:'Analytick√Ω',aggr:0.4,bluff:0.05}
]

// ---------- Stav hry ----------
let state={deck:[],player:[],bot:[],board:[],stage:'pre',bet:50,pot:0,currentBet:0,playerFolded:false,botRole:null,history:[]}

// ---------- Pomocn√© funkce pro UI a logiku ----------
function setBotRole(role){state.botRole=role;el('botRole').textContent='Role soupe≈ôe: '+role.name}
function agregarHist(txt){const d=document.createElement('div');d.className='history-item';d.textContent=txt;el('history').prepend(d)}

// ---------- Render ----------
function render(){
  const pc=el('playerCards');pc.innerHTML='';state.player.forEach(c=>pc.appendChild(renderCard(c)))
  const bc=el('botCards');bc.innerHTML='';state.bot.forEach(c=>bc.appendChild(renderCard(c,state.stage!=='showdown')))
  const bd=el('board');bd.innerHTML='';for(let i=0;i<5;i++){bd.appendChild(state.board[i]?renderCard(state.board[i]):renderCard({},true))}
  el('betDisplay').textContent=state.bet
  // vypoƒç√≠tat equity a uk√°zat pravdƒõpodobnosti
  if(state.player.length===2){
    const mc=monteCarlo(state.player,state.board,600)
    el('equityPlayer').textContent=(mc.wins*100).toFixed(1)+'% (ties '+(mc.ties*100).toFixed(1)+'%)'
    el('equityBot').textContent=(mc.losses*100).toFixed(1)+'%'
    el('resultText').textContent=mc.wins>mc.losses?'V√Ωhoda hr√°ƒçe':(mc.losses>mc.wins?'V√Ωhoda soupe≈ôe':'Vyrovnan√©')
    const names=['Vysok√° karta','P√°r','Dva p√°ry','Trojice','Postupka','Barva','Full house','ƒåty≈ôi stejn√©','Postupka v barvƒõ']
    const pb=el('probBody');pb.innerHTML=''
    for(let i=8;i>=0;i--){const tr=document.createElement('tr');tr.innerHTML=`<td>${names[i]}</td><td>${(mc.oppDist[i]*100).toFixed(2)}%</td>`;pb.appendChild(tr)}
  }
}

// ---------- Bot rozhodov√°n√≠ (vyu≈æ√≠v√° roli, s√≠lu ruky a equity) ----------
function botDecision(){
  if(state.playerFolded) return 'check'
  const role=state.botRole
  const botHandEval=evaluateHand(state.bot.concat(state.board))
  const playerApprox=monteCarlo(state.player,state.board,300)
  const botEquity=1-playerApprox.wins - playerApprox.ties/2 // aproximace
  const strengthRank=botHandEval.type // 0..8
  // z√°kladn√≠ heuristika
  // agresivn√≠ role: vy≈°≈°√≠ tendence s√°zet i u slab≈°√≠ch rukou (s bluffem)
  // konzervativn√≠: s√°z√≠ jen u siln√Ωch
  // sagazn√≠: mix
  // analytick√Ω: s√°zej podle equity threshold
  let action='check'
  const rnd=Math.random()
  // balky bluff logic
  const willBluff = rnd < role.bluff
  if(role.id==='aggressive'){
    if(strengthRank>=4 || willBluff || rnd<role.aggr) action = (rnd<0.5? 'raise':'call')
    else action='check'
  } else if(role.id==='conservative'){
    if(strengthRank>=6) action = 'raise'
    else if(strengthRank>=4 && rnd<0.3) action='call'
    else action='check'
  } else if(role.id==='balanced'){
    if(strengthRank>=5 || (rnd<role.bluff)) action = (rnd<0.5?'raise':'call')
    else action='check'
  } else if(role.id==='analytic'){
    if(botEquity>0.6) action='raise'
    else if(botEquity>0.4) action='call'
    else if(botEquity>0.2 && rnd<role.bluff) action='raise'
    else action='check'
  }
  return action
}

// ---------- Hlavn√≠ pr≈Øbƒõh hry ----------
function novaHra(){
  state.deck=makeDeck()
  state.player=draw(state.deck,2)
  state.bot=draw(state.deck,2)
  state.board=[]
  state.stage='pre'
  state.pot=0
  state.currentBet=0
  state.playerFolded=false
  // p≈ôi nov√© h≈ôe vybereme roli pro bota n√°hodnƒõ (m≈Ø≈æeme ji budoucnƒõ mƒõnit adaptivnƒõ)
  const role=BOT_ROLES[Math.floor(Math.random()*BOT_ROLES.length)]
  setBotRole(role)
  agregarHist('Nov√° hra ‚Äî soupe≈ô je: '+role.name)
  render()
}

function dalsiFaze(){
  if(state.playerFolded) return
  if(state.stage==='pre'){draw(state.deck,1);state.board.push(...draw(state.deck,3));state.stage='flop';agregarHist('Flop: '+state.board.map(card=>card.code).join(' '))}
  else if(state.stage==='flop'){draw(state.deck,1);state.board.push(...draw(state.deck,1));state.stage='turn';agregarHist('Turn: '+state.board.map(card=>card.code).join(' '))}
  else if(state.stage==='turn'){draw(state.deck,1);state.board.push(...draw(state.deck,1));state.stage='river';agregarHist('River: '+state.board.map(card=>card.code).join(' '))}
  else if(state.stage==='river'){state.stage='showdown';showdown();return}
  // po ka≈æd√© f√°zi m≈Ø≈æe bot reagovat
  const botAct = botDecision()
  handleBotAction(botAct)
  render()
}

function handleBotAction(act){
  if(act==='raise'){
    state.currentBet += state.bet
    state.pot += state.bet
    agregarHist('Soupe≈ô navy≈°uje na '+state.currentBet)
    el('tips').textContent = 'Soupe≈ô zv√Ω≈°il s√°zku ‚Äî zva≈æte, zdali jeho role ('+state.botRole.name+') naznaƒçuje s√≠lu nebo bluff.'
  } else if(act==='call'){
    state.pot += state.currentBet
    agregarHist('Soupe≈ô dorovnal.')
    el('tips').textContent = 'Soupe≈ô dorovnal ‚Äî m≈Ø≈æe to b√Ωt poƒç√≠tan√° reakce na va≈°i akci.'
  } else {
    agregarHist('Soupe≈ô checkuje/p≈ôech√°z√≠.')
    el('tips').textContent = 'Soupe≈ô zvolil pasivn√≠ akci ‚Äî nƒõkdy znamen√° slabost, jindy ƒçek√° na past.'
  }
}

// ---------- Akce hr√°ƒçe ----------
function playerBet(){
  state.currentBet += state.bet
  state.pot += state.bet
  agregarHist('Vsad√≠te '+state.bet+' ‚Äî celkov√Ω bet: '+state.currentBet)
  // bot reaguje
  const botAct = botDecision()
  handleBotAction(botAct)
  render()
}
function playerCall(){
  state.pot += state.currentBet
  agregarHist('Dorovn√°v√°te '+state.currentBet)
  // pokraƒçujeme do dal≈°√≠ f√°ze
  dalsiFaze()
}
function playerFold(){
  state.playerFolded=true
  agregarHist('Skl√°d√°te ‚Äî soupe≈ô bere bank. Role soupe≈ôe: '+state.botRole.name)
  el('tips').textContent = 'Slo≈æen√≠m se vyhnete dal≈°√≠m ztr√°t√°m ‚Äî uƒçte se rozpozn√°vat vzdƒõl√°vac√≠ vzory s√°zen√≠.'
  setTimeout(()=>novaHra(),2000)
}

// ---------- Showdown ----------
function showdown(){
  const playerAll = state.player.concat(state.board)
  const botAll = state.bot.concat(state.board)
  const cmp = compareHands(playerAll,botAll)
  const pEval = evaluateHand(playerAll)
  const bEval = evaluateHand(botAll)
  const winner = cmp>0? 'Hr√°ƒç' : (cmp<0? 'Soupe≈ô' : 'Rem√≠za')
  agregarHist('Showdown ‚Äî '+winner+' vyhr√°v√°. ('+pEval.desc+' vs '+bEval.desc+')')
  el('tips').textContent = 'Showdown odhalil: '+bEval.desc+' vs '+pEval.desc+'. Uƒçte se z rozd√≠l≈Ø ve s√°zk√°ch a velikostech bet≈Ø.'
  state.stage='showdown'
  render()
  setTimeout(()=>novaHra(),3500)
}

// ---------- Inicializace ud√°lost√≠ ----------
el('dealBtn').onclick = ()=>novaHra()
el('nextStageBtn').onclick = ()=>dalsiFaze()
el('betRange').oninput = e=>{state.bet=Number(e.target.value);el('betDisplay').textContent=state.bet}
el('betBtn').onclick = ()=>playerBet()
el('callBtn').onclick = ()=>playerCall()
el('foldBtn').onclick = ()=>playerFold()

// ---------- Spustit hru ----------
novaHra()

</script>
</body>
</html>
